// SPDX-License-Identifier: GPL-2.0+
/*
 *  Copyright (C) 2011 - 2015 Xilinx
 *  Copyright (C) 2012 National Instruments Corp.
 */
/dts-v1/;
#include "zynq-7000.dtsi"
#include <dt-bindings/gpio/gpio.h>

/ {
	model = "Xilinx ZC7010 SPRAY board";
	compatible = "xlnx,zynq-zc702", "xlnx,zynq-7000";

	aliases {
		ethernet0 = &gem0;
		serial0 = &uart1;
		mmc0 = &sdhci0;
	};

	memory@0 {
		device_type = "memory";
		reg = <0x0 0x40000000>;
	};

	chosen {
		bootargs = "";
		stdout-path = "serial0:115200n8";
	};

  
// adc_axi_dma_0: adc_axi_dma@1 {
//     #address-cells = <1>;
// 		#size-cells = <1>;
// 		status = "okay";
//     compatible ="adc_axi_dma";
//     // dmas = <&axi_dma_1 0
//     //         &axi_dma_1 1>;
//     // dma-names = "axidma0", "axidma1";

//       dmas = <&axi_dma_1 1>;
//       dma-names = "axidma0";
//       reg = <0x60000000 0x20>;
// } ;

// axidmatest_0: axidmatest@1 {
//   		status = "okay";
//       compatible ="xlnx,axi-dma-test-1.00.a";
//       dmas = <&axi_dma_1 1>;
//       dma-names = "axidma0";
// } ;
// amba_pl: amba_pl {
// 		ranges;
// 		compatible = "simple-bus";
// 		#address-cells = <1>;
// 		#size-cells = <1>;
// 		axi_dma_1: axi_dma@40400000 {
//       #dma-cells = <1>;
// 			xlnx,dlytmr-resolution = <125>;
// 			xlnx,num-s2mm-channels = <1>;
// 			xlnx,rable = <0>;
// 			xlnx,sg-length-width = <14>;
// 			xlnx,ip-name = "axi_dma";
// 			reg = <0x40400000 0x10000>;
// 			xlnx,sg-use-stsapp-length = <0>;
// 			xlnx,s2mm-burst-size = <256>;
// 			xlnx,c-dlytmr-resolution = <125>;
// 			xlnx,c-num-s2mm-channels = <1>;
// 			xlnx,enable-multi-channel = <0>;
// 			xlnx,num-mm2s-channels = <1>;
// 			xlnx,c-sg-length-width = <14>;
// 			interrupt-names = "s2mm_introut";
// 			compatible = "xlnx,axi-dma-7.1" , "xlnx,axi-dma-1.00.a";
// 			xlnx,c-m-axis-mm2s-tdata-width = <32>;
// 			xlnx,c-sg-use-stsapp-length = <0>;
// 			xlnx,c-s2mm-burst-size = <256>;
// 			xlnx,mm2s-burst-size = <16>;
// 			xlnx,c-enable-multi-channel = <0>;
// 			xlnx,c-num-mm2s-channels = <1>;
// 			interrupt-parent = <&intc>;
// 			xlnx,include-s2mm-dre = <0>;
// 			xlnx,c-mm2s-burst-size = <16>;
// 			status = "okay";
// 			xlnx,c-include-s2mm-dre = <0>;
// 			xlnx,include-mm2s-dre = <0>;
// 			xlnx,name = "axi_dma_0";
// 			interrupts = < 0 29 4 >;
// 			xlnx,c-include-sg = <0>;
// 			xlnx,c-m-axi-s2mm-data-width = <32>;
// 			xlnx,include-s2mm-sf = <1>;
// 			xlnx,c-include-mm2s-dre = <0>;
// 			xlnx,include-s2mm = <1>;
// 			clocks = <&clkc 15>, <&clkc 15>;
// 			xlnx,addrwidth = <0x20>;
// 			xlnx,c-m-axi-mm2s-data-width = <32>;
// 			xlnx,edk-iptype = "PERIPHERAL";
// 			xlnx,c-include-s2mm-sf = <1>;
// 			xlnx,include-mm2s-sf = <1>;
// 			clock-names = "m_axi_s2mm_aclk" , "s_axi_lite_aclk";
// 			xlnx,c-include-s2mm = <1>;
// 			xlnx,c-addr-width = <32>;
// 			xlnx,c-single-interface = <0>;
// 			xlnx,include-mm2s = <0>;
// 			xlnx,c-s-axis-s2mm-tdata-width = <16>;
// 			xlnx,s2mm-data-width = <0x20>;
// 			xlnx,c-include-mm2s-sf = <1>;
// 			xlnx,prmry-is-aclk-async = <0>;
// 			xlnx,c-include-mm2s = <0>;
// 			xlnx,increase-throughput = <0>;
// 			xlnx,micro-dma = <0>;
// 			xlnx,mm2s-data-width = <0x20>;
// 			xlnx,c-prmry-is-aclk-async = <0>;
// 			xlnx,c-sg-include-stscntrl-strm = <0>;
// 			xlnx,c-increase-throughput = <0>;
// 			xlnx,c-micro-dma = <0>;
// 			dma_channel_40400030: dma-channel@40400030 {
// 				interrupts = <0 29 4>;
// 				xlnx,datawidth = <0x10>;
// 				xlnx,device-id = <0x0>;
// 				compatible = "xlnx,axi-dma-s2mm-channel";
// 				dma-channels = <0x1>;
// 			};
// 		};
// 		m_axi_lite_2_reg_0: m_axi_lite_2_reg@60000000 {
// 			xlnx,rable = <0>;
// 			compatible = "xlnx,m-axi-lite-2-reg-1.0";
// 			status = "okay";
// 			clock-names = "S_AXI_ACLK";
// 			xlnx,ip-name = "m_axi_lite_2_reg";
// 			xlnx,reg-number = <16>;
// 			xlnx,edk-iptype = "PERIPHERAL";
// 			reg = <0x60000000 0x20000000>;
// 			clocks = <&clkc 15>;
// 			xlnx,name = "m_axi_lite_2_reg_0";
// 		};
// 	};
};



&clkc {
	ps-clk-frequency = <33333333>;
};

&gem0 {
	status = "okay";
	phy-mode = "rgmii-id";
	phy-handle = <&ethernet_phy>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_gem0_default>;
	// phy-reset-gpio = <&gpio0 11 0>;
	// phy-reset-active-low;

	ethernet_phy: ethernet-phy@1 {
		reg = <1>;
	};
};


&pinctrl0 {
	pinctrl_gem0_default: gem0-default {
		mux {
			function = "ethernet0";
			groups = "ethernet0_0_grp";
		};

		conf {
			groups = "ethernet0_0_grp";
			slew-rate = <0>;
			power-source = <2>;
		};

		conf-rx {
			pins = "MIO22", "MIO23", "MIO24", "MIO25", "MIO26", "MIO27";
			bias-high-impedance;
			low-power-disable;
		};

		conf-tx {
			pins = "MIO16", "MIO17", "MIO18", "MIO19", "MIO20", "MIO21";
			bias-disable;
			low-power-enable;
		};

		mux-mdio {
			function = "mdio0";
			groups = "mdio0_0_grp";
		};

		conf-mdio {
			groups = "mdio0_0_grp";
			slew-rate = <0>;
			power-source = <2>;
			bias-disable;
		};
	};


	pinctrl_sdhci0_default: sdhci0-default {
		mux {
			groups = "sdio0_2_grp";
			function = "sdio0";
		};

		conf {
			groups = "sdio0_2_grp";
			slew-rate = <0>;
			power-source = <2>;
			bias-disable;
		};

		mux-cd {
			groups = "gpio0_46_grp";
			function = "sdio0_cd";
		};

		conf-cd {
			groups = "gpio0_46_grp";
			bias-high-impedance;
			bias-pull-up;
			slew-rate = <0>;
			power-source = <2>;
		};

		mux-wp {
			groups = "gpio0_50_grp";
			function = "sdio0_wp";
		};

		conf-wp {
			groups = "gpio0_50_grp";
			bias-high-impedance;
			bias-pull-up;
			slew-rate = <0>;
			power-source = <2>;
		};
	};

	pinctrl_uart1_default: uart1-default {
		mux {
			groups = "uart1_10_grp";
			function = "uart1";
		};

		conf {
			groups = "uart1_10_grp";
			slew-rate = <0>;
			power-source = <2>;
		};

		conf-rx {
			pins = "MIO49";
			bias-high-impedance;
		};

		conf-tx {
			pins = "MIO48";
			bias-disable;
		};
	};
};


&sdhci0 {
	bootph-all;
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_sdhci0_default>;
  disable-wp; // 禁用写保护
};

&uart1 {
	bootph-all;
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart1_default>;
};

